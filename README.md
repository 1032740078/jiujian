# jiujian-就简

基于egg.js 常用业务中台技术解决方案


```
业务中台是企业实现各业务板块之间链接和协同，持续提升业务创新效率，
确保关键业务链路的稳定高效和经济性兼顾的思想体系，包含了技术和组
织两大部分，通过“方法+工具+业务理解”加以实现.
```


主要功能/目录or接口

1. 用户鉴权管理中心(开发中)         /userCenter
    - 用户管理
        - 添加账号
        - 查询账号             
        - 修改账号             
        - 删除账号             
    - 角色权限管理
        - 添加角色             
        - 查询角色             
        - 修改角色             
        - 删除角色              
    - 组织管理
        - 添加角色             
        - 查询角色             
        - 修改角色             
        - 删除角色
    - OAuth2 登录/注册认证
        - 注册/登录:
            - 手机号/短信
            - 用户名or手机号/密码
            - 无账号密码第三方授权登陆
    - 接口权限             

2. 交易中心(开发中)         /tradingCenter
    - 支付订单管理
        - 提交订单:状态码0
        - 查询订单
        - 修改订单(只能未支付之"前"操作)
        - 取消订单(只能未支付之"前"操作):状态码1
        - 支付订单:状态码2
        - 订单完成:状态码3
        - 申请退款订单(只能支付之"后"操作):状态码4
        - 确认退款订单(只能支付之"后"操作):状态码5
        - 申请退货订单(只能支付之"后"操作):状态码6
        - 确认退货订单(只能支付之"后"操作):状态码7
        - 关闭订单:状态码8
        
        - 支付订单:
            - 订单基础信息:
                - 订单类型
                - 订单编号
                - 订单状态
                - 订单渠道
            - 用户信息:
                - 用户账号
                - 用户角色信息(多个)
                - 收货信息
            - 支付信息:
                - 支付流水号
                - 商品总金额
                - 运费
                - 促销活动(多个)
                - 其他优惠(多个)
                - 优惠总金额
                - 实付金额
            - 物流信息(多个):
                - 物流公司
                - 物流单号
                - 物流状态
            - 产品信息(多个):
                - SKU
                - 数量
                - 单价
                - 运费
                - 产品快照
            - 营销信息:
                - 促销活动(多个)
                - 其他优惠(多个)
                - 优惠总金额
            
    - 转账订单管理
        - 提交订单:状态码0
        - 查询订单
        - 修改订单(只能未支付之"前"操作)
        - 取消订单(只能未支付之"前"操作):状态码1
        - 确认转账:状态码2
        - 支付订单:状态码3
        - 订单完成:状态码4
        - 关闭订单:状态码5
            
        - 转账订单:
            - 订单基础信息:
                - 订单类型
                - 订单编号
                - 订单状态  
            - 收款用户信息:
                - 用户账号
                - 用户收款方式
            - 支付信息:
                - 支付流水号
                - 金额
                
4. 交易结算中心(开发中)     /
    - 支付
        - 支付流水
        - 支付订单
        - 支付金额
        - 支付时间
        - md5校验
        - 发起支付的应用
        - 支付方式
            - 钱包支付
            - 支付宝支付
            - 微信支付
            - 银联支付
            - 第三方支付
        - 异步通知地址
    
    - 转账
        - 转账流水
        - 转账订单
        - 转账金额
        - 转账时间
        - md5校验
        - 发起转账的应用
        - 转账方式
            - 支付宝支付
            - 微信支付
            - 银行卡支付
            - 第三方支付
        - 异步通知地址

5. 营销中心(开发中)        /marketingCenter

6. 商品中心(开发中)        /commodityCenter

7. 库存中心(开发中)        /stockCenter

8. 数据库中心(开发中)      /databaseCenter

9. 应用中心(开发中)        /applicationCenter

10. 接口中心(开发中)       /interfaceCenter

11. 文件存储中心(开发中)   /fileCenter

12. 监控/警报中心(开发中)  /monitoringCenter

13. 分类标签中心(开发中)      /labelCenter

14. 发信中心(开发中)      /sendCenter

15. 消息中心(开发中)      /messageCenter

16. 文章中心(开发中)      /articleCenter

17. 计费中心(开发中)      

配置环境:

nodejs 10+

最低硬件配置:

2核心 1g内存

持续集成方案:

k8s+Jenkins+GitLab

### Development

```bash
$ npm i
$ npm run dev
$ open http://localhost:7001/
```

### Deploy

```bash
$ npm start
$ npm stop
```

### npm scripts

- Use `npm run lint` to check code style.
- Use `npm test` to run unit test.
- Use `npm run autod` to auto detect dependencies upgrade, see [autod](https://www.npmjs.com/package/autod) for more detail.
